<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Maze</title>
<style>
    :root {
        --wall-color: #333;
        --floor-color: #555;
        --ceiling-color: #444;
        --wall-texture: linear-gradient(rgba(0,0,0,0.2) 2px, transparent 2px), linear-gradient(90deg, rgba(0,0,0,0.2) 2px, transparent 2px);
        --wall-texture-size: 50px 50px;
    }
    body {
        background-color: #000;
        color: #fff;
        font-family: 'Courier New', Courier, monospace;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
        overflow: hidden;
    }
    #viewport {
        width: 800px;
        height: 600px;
        perspective: 800px;
        border: 2px solid #666;
        background-color: #111;
        position: relative;
    }
    #camera {
        width: 100%;
        height: 100%;
        transform-style: preserve-3d;
        transition: transform 0.5s ease-in-out;
    }
    .tunnel {
        width: 800px;
        height: 600px;
        position: absolute;
        transform-style: preserve-3d;
    }
    .wall {
        position: absolute;
        background-color: var(--wall-color);
        background-image: var(--wall-texture);
        background-size: var(--wall-texture-size);
        border: 1px solid #222;
        box-sizing: border-box;
    }
    .floor { transform: rotateX(90deg) translateZ(-300px); width: 800px; height: 1000px; background-color: var(--floor-color); }
    .ceiling { transform: rotateX(-90deg) translateZ(-300px); width: 800px; height: 1000px; background-color: var(--ceiling-color); }
    .left { transform: rotateY(-90deg) translateZ(-400px); width: 1000px; height: 600px; }
    .right { transform: rotateY(90deg) translateZ(-400px); width: 1000px; height: 600px; }
    
    #terminal-screen, #success-screen {
        position: absolute;
        top: 0; left: 0; right: 0; bottom: 0;
        display: none; /* Hidden by default */
        flex-direction: column;
        justify-content: center;
        align-items: center;
        background-color: rgba(0,0,0,0.8);
    }
    .terminal-box {
        width: 400px;
        padding: 20px;
        background: rgba(0,20,0,0.9);
        border: 2px solid lime;
        border-radius: 5px;
        text-align: center;
    }
    .terminal-box input { width: 80%; padding: 10px; margin-bottom: 10px; background: #000; color: lime; border: 1px solid lime; text-transform: uppercase; }
    .terminal-box button { padding: 10px 20px; background: lime; color: #000; border: none; cursor: pointer; }
    #success-screen .terminal-box { background: rgba(20,0,0,0.9); border-color: #f85149; }
    #success-screen img { width: 200px; height: 200px; margin-top: 15px; border: 5px solid white; }

    #controls { margin-top: 20px; }
    #controls button { font-family: 'Courier New', Courier, monospace; font-size: 16px; padding: 10px 15px; margin: 0 5px; background: #333; color: #fff; border: 1px solid #666; cursor: pointer; }
    
    #keyboard-hints {
        position: absolute;
        bottom: 100px;
        background-color: rgba(0,0,0,0.7);
        padding: 10px 20px;
        border-radius: 5px;
        border: 1px solid #444;
        transition: opacity 1s ease-out;
    }
</style>
</head>
<body>

<div id="viewport">
    <div id="camera">
        </div>
    <div id="terminal-screen">
        <div class="terminal-box">
            <h3>SYSTEM TERMINAL</h3>
            <p>PASSWORD REQUIRED</p>
            <input type="text" id="password" placeholder="PASSWORD..." onkeyup="if(event.key === 'Enter') checkPassword();">
            <button onclick="checkPassword()">UNLOCK</button>
        </div>
    </div>
    <div id="success-screen">
        <div class="terminal-box">
            <h2>ACCESS GRANTED</h2>
            <p>I'm thinking of a character. You'll have to guess who I am before I help you further. Scan here to play my game.</p>
            <img src="chatbot_qr.png" alt="QR Code to Chatbot">
        </div>
    </div>
</div>

<div id="controls">
    <button onclick="move('forward')">Forward</button>
    <button onclick="move('backward')">Backward</button>
    <button onclick="turn('left')">Turn Left</button>
    <button onclick="turn('right')">Turn Right</button>
</div>

<div id="keyboard-hints">
    Use Arrow Keys: ↑ Forward, ↓ Backward, ← Turn Left, → Turn Right
</div>

<script>
    const camera = document.getElementById('camera');
    const controls = document.getElementById('controls');
    const terminalScreen = document.getElementById('terminal-screen');
    const successScreen = document.getElementById('success-screen');
    const keyboardHints = document.getElementById('keyboard-hints');

    let playerRotation = 0;
    let currentZ = 0;
    const segmentLength = 1050;
    const mazeLength = 5; // Number of segments

    function createWorld() {
        for (let i = 0; i < mazeLength; i++) {
            let tunnel = document.createElement('div');
            tunnel.className = 'tunnel';
            tunnel.style.transform = `translateZ(${-i * (segmentLength - 50)}px)`;
            tunnel.innerHTML = `
                <div class="wall floor"></div>
                <div class="wall ceiling"></div>
                <div class="wall left"></div>
                <div class="wall right"></div>
            `;
            camera.appendChild(tunnel);
        }
    }

    function move(direction) {
        if (direction === 'forward') {
            if (currentZ > -(segmentLength * (mazeLength - 1))) {
                currentZ -= segmentLength;
            }
        } else if (direction === 'backward') {
            if (currentZ < 0) {
                currentZ += segmentLength;
            }
        }
        
        if (currentZ <= -(segmentLength * (mazeLength - 1))) {
            controls.style.display = 'none';
            keyboardHints.style.display = 'none';
            terminalScreen.style.display = 'flex';
        }
        updateCamera();
    }

    function turn(direction) {
        if (direction === 'left') playerRotation -= 90;
        if (direction === 'right') playerRotation += 90;
        updateCamera();
    }

    function updateCamera() {
        camera.style.transform = `translateZ(${currentZ}px) rotateY(${playerRotation}deg)`;
    }

    function checkPassword() {
        const password = document.getElementById('password').value;
        if (password.trim().toLowerCase() === 'verge') {
            terminalScreen.style.display = 'none';
            successScreen.style.display = 'flex';
        } else {
            alert('ACCESS DENIED');
            document.getElementById('password').value = '';
        }
    }

    function handleKeyPress(event) {
        switch(event.key) {
            case 'ArrowUp': move('forward'); break;
            case 'ArrowDown': move('backward'); break;
            case 'ArrowLeft': turn('left'); break;
            case 'ArrowRight': turn('right'); break;
        }
    }

    // Initial setup
    createWorld();
    window.addEventListener('keydown', handleKeyPress);
    
    // Hide keyboard hints after 20 seconds
    setTimeout(() => {
        keyboardHints.style.opacity = '0';
    }, 20000);

</script>

</body>
</html>
